(()=>{"use strict";var e={63:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getCustomProcedures=function(e){return[new s.default(e),new a.default(e),new i.default(e),new o.default(e),new u.default(e)]};const s=n(r(126)),o=n(r(956)),a=n(r(123)),i=n(r(357)),u=n(r(726))},123:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.browserService=e}getDescription(){return"Merge Windows"}getName(){return"windows.merge"}async handle(e){return(e.data?.metadata?.pressedKeys||[]).includes("Enter")&&await this.mergeWindows(await this.browserService.getAllWindowIds()),{sections:[]}}async mergeWindows(e){let t=[];for(const r of e){const e=await this.browserService.getTabsFromWindow(r);t=[...t,...e]}let r=0;const n=await this.browserService.getCurrentWindowId();for(const e of t)await this.browserService.moveTab(e.id,n,r++)}}},126:function(e,t,r){var n,s=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),a=0;a<r.length;a++)"default"!==r[a]&&s(t,e,r[a]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0});const i=a(r(949));class u{constructor(e){this.browserService=e}getDescription(){return"Extract Tabs By Domain"}getName(){return"tabs.extractByDomain"}async handle(e){const t=e.data,r=e.data?.metadata?.pressedKeys||[],n=i.getInput(u.INPUT_DOMAIN_ID,t)?.value||"",s=await this.browserService.getTabsFromCurrentWindow(),o=new Set(s.map((({url:e})=>i.getDomainFromURL(e))));return r.includes("Enter")?(await this.extractTabsByDomain(n),t):{sections:[{elements:[{input:{id:u.INPUT_DOMAIN_ID,placeholder:"Enter domain",value:n}}]},{elements:Array.from(o).sort(((e,t)=>e.localeCompare(t))).filter((e=>0===n.length||e.startsWith(n))).map((e=>({text:{text:e}})))}]}}async extractTabsByDomain(e){if(e.length>0){const t=(await this.browserService.getTabsFromCurrentWindow()).filter((({url:t})=>i.getDomainFromURL(t).startsWith(e)));await this.browserService.createWindow(t.map((({id:e})=>e)))}}}u.INPUT_DOMAIN_ID="input-domain",t.default=u},209:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{getName(){return"getProcedures"}async handle({context:e}){const{customProcedures:t}=e;return Array.from(t.values()).map((e=>({procedure:e.getName(),description:e.getDescription()})))}}},278:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.internalProcedures=new Map,this.customProcedures=new Map;const{internalProcedures:t,customProcedures:r}=e;t.forEach((e=>this.registerInternalProcedure(e))),r.forEach((e=>this.registerCurstomProcedure(e)))}start(){chrome.runtime.onMessage.addListener(((e,t,r)=>{if(e.procedure.startsWith("internal.")){const t=this.internalProcedures.get(e.procedure);t&&t.handle({request:e,context:this.getContext()}).then((e=>r(e)))}else if(e.procedure.startsWith("custom.")){const t=this.customProcedures.get(e.procedure);t&&t.handle(e).then((e=>r(e)))}return!0}))}registerCurstomProcedure(e){this.customProcedures.set(`custom.${e.getName()}`,e)}registerInternalProcedure(e){this.internalProcedures.set(`internal.${e.getName()}`,e)}getContext(){return{customProcedures:this.customProcedures}}}},357:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.browserService=e}getDescription(){return"Sort Tabs By Domain"}getName(){return"tabs.sortByDomain"}async handle(e){return(e.data?.metadata?.pressedKeys||[]).includes("Enter")&&await this.sortTabsByDomain(),{sections:[]}}async sortTabsByDomain(){const e=await this.browserService.getCurrentWindowId(),t=(await this.browserService.getTabsFromCurrentWindow()).sort(((e,t)=>e.url.localeCompare(t.url)));let r=0;for(const n of t)await this.browserService.moveTab(n.id,e,r++)}}},726:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.browserService=e}getDescription(){return"Ungroup Tabs"}getName(){return"tabs.ungroup"}async handle(e){return(e.data?.metadata?.pressedKeys||[]).includes("Enter")&&await this.ungroupTabs(),{sections:[]}}async ungroupTabs(){const e=await this.browserService.getTabsFromCurrentWindow();for(const t of e)await this.browserService.ungroupTab(t.id)}}},762:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(63),o=n(r(278)),a=n(r(915)),i=n(r(209)),u=new a.default;new class{constructor(e){this.chromeMessageHandler=e}start(){this.chromeMessageHandler.start()}}(new o.default({internalProcedures:[new i.default],customProcedures:(0,s.getCustomProcedures)(u)})).start()},915:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{async getAllWindowIds(){return chrome.windows.getAll().then((e=>e.map((e=>e.id||0))))}async getTabsFromCurrentWindow(){return chrome.tabs.query({currentWindow:!0}).then((e=>e.map((e=>({id:e.id||0,url:e.url||"",index:e.index})))))}async getCurrentWindowId(){return chrome.windows.getCurrent().then((({id:e})=>e||0))}async createTabGroup(e,t){const r=await chrome.tabs.group({tabIds:t});await chrome.tabGroups.update(r,{title:e,collapsed:!0})}async getTabsFromWindow(e){return chrome.tabs.query({windowId:e}).then((e=>e.map((e=>({id:e.id||0,url:e.url||"",index:e.index})))))}async moveTab(e,t,r){await chrome.tabs.move(e,{windowId:t,index:r})}async createWindow(e){const[t,...r]=e,n=await chrome.windows.create({tabId:t,focused:!0});let s=1;for(const e of r)await this.moveTab(e,n.id||0,s++)}async ungroupTab(e){await chrome.tabs.ungroup(e)}}},949:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDomainFromURL=function(e){let t=new URL(e).hostname;return t.startsWith("www.")&&(t=t.slice(4)),t},t.getInput=function(e,{sections:t}){for(const{elements:r}of t)for(const t of r)if(t.input&&t.input.id===e)return t.input;return null},t.compareObjects=function(e,t){const r=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if("object"==typeof e[n]&&"object"==typeof t[n]){if(!r(e[n],t[n]))return!1}else if(e[n]!==t[n])return!1;return!0};return r(JSON.parse(JSON.stringify(e)),JSON.parse(JSON.stringify(t)))}},956:function(e,t,r){var n,s=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),a=0;a<r.length;a++)"default"!==r[a]&&s(t,e,r[a]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0});const i=a(r(949));t.default=class{constructor(e){this.browserService=e}getDescription(){return"Group Tabs By Domain"}getName(){return"tabs.groupByDomain"}async handle(e){return(e.data?.metadata?.pressedKeys||[]).includes("Enter")&&await this.groupTabsByDomain(),{sections:[]}}async groupTabsByDomain(){const e=await this.browserService.getTabsFromCurrentWindow(),t=new Map;for(const r of e){const e=i.getDomainFromURL(r.url);t.has(e)||t.set(e,[]),t.get(e)?.push(r)}for(const[e,r]of t.entries()){const t=e.includes(".")?e.split(".").slice(0,-1).join("."):e;await this.browserService.createTabGroup(t,r.map((({id:e})=>e)))}}}}},t={};!function r(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}(762)})();